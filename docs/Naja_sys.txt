                                Naja instructions
------------------------------------------------------------------------------------------------
                                opcode format
------------------------------------------------------------------------------------------------
|31|30|29|28|27|26|25|24|23|22|21|20|19|18|17|16|15|14|13|12|11|10| 9| 8| 7| 6| 5| 4| 3| 2| 1| 0|
| type| S| opcode | 0|<-- rd --->| 0| size| D  0| 0  0  0  0  0  0  0  0  0  0  0  0|<-- rs0 -->|

type: 0 = integer, 1 = float,  2 = vector, 3 = system
SH  : 0 = LSL,     1 = LSR,    2 = ASR,   (3 = reserved)
   D: 0 = read,    1 = write
   S: 0 = user,    1 = kernel
   0: reserved
------------------------------------------------------------------------------------------------

48, jmp, disp                   opcode = 48
------------------------------------------------------------------------------------------------
|31|30|29|28|27|26|25|24|23|22|21|20|19|18|17|16|15|14|13|12|11|10| 9| 8| 7| 6| 5| 4| 3| 2| 1| 0|
| 1  1| 0  0  0  0|<------------------------------- simm26:00 --------------------------------->|

jmp disp; // -128M ~ 128M
------------------------------------------------------------------------------------------------

49, call, disp                  opcode = 49
------------------------------------------------------------------------------------------------
|31|30|29|28|27|26|25|24|23|22|21|20|19|18|17|16|15|14|13|12|11|10| 9| 8| 7| 6| 5| 4| 3| 2| 1| 0|
| 1  1| 0  0  0  1|<------------------------------- simm26:00 --------------------------------->|

call disp; // -128M ~ 128M
------------------------------------------------------------------------------------------------

50, jmp, reg                    opcode = 50
------------------------------------------------------------------------------------------------
|31|30|29|28|27|26|25|24|23|22|21|20|19|18|17|16|15|14|13|12|11|10| 9| 8| 7| 6| 5| 4| 3| 2| 1| 0|
| 1  1| 0  0  1  0| 0|<-- rd --->| 0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0|

jmp *rd;
------------------------------------------------------------------------------------------------
|31|30|29|28|27|26|25|24|23|22|21|20|19|18|17|16|15|14|13|12|11|10| 9| 8| 7| 6| 5| 4| 3| 2| 1| 0|
| 1  1| 0  0  1  0| 0|<----------------------- simm21:00 ----------------------->|<-- cc --->| 1|

jcc simm21:00; // -4M ~ +4M
cc = 0,  z,
cc = 1, nz,
cc = 2, ge,
cc = 3, gt,
cc = 4, le,
cc = 5, lt,
------------------------------------------------------------------------------------------------

51, call, reg                   opcode = 51
------------------------------------------------------------------------------------------------
|31|30|29|28|27|26|25|24|23|22|21|20|19|18|17|16|15|14|13|12|11|10| 9| 8| 7| 6| 5| 4| 3| 2| 1| 0|
| 1  1| 0  0  1  1| 0|<-- rd --->| 0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0|

call *rd;
------------------------------------------------------------------------------------------------

52, setcc                       opcode = 52
------------------------------------------------------------------------------------------------
|31|30|29|28|27|26|25|24|23|22|21|20|19|18|17|16|15|14|13|12|11|10| 9| 8| 7| 6| 5| 4| 3| 2| 1| 0|
| 1  1| 0  1  0  0| 0|<-- rd --->| 0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0|<-- cc --->| 0|

cc = 0,  z,
cc = 1, nz,
cc = 2, ge,
cc = 3, gt,
cc = 4, le,
cc = 5, lt,
------------------------------------------------------------------------------------------------

53, adrp, reg                   opcode = 53
------------------------------------------------------------------------------------------------
|31|30|29|28|27|26|25|24|23|22|21|20|19|18|17|16|15|14|13|12|11|10| 9| 8| 7| 6| 5| 4| 3| 2| 1| 0|
| 1  1| 0  1  0  1| 0|<-- rd --->|<-------------------------- simm21 -------------------------->|

rd = RIP + ((int64_t)simm21 << 12); // load address' high 21 bits relative to current RIP, -4G:+4G
------------------------------------------------------------------------------------------------

54, ret,                        opcode = 54
------------------------------------------------------------------------------------------------
|31|30|29|28|27|26|25|24|23|22|21|20|19|18|17|16|15|14|13|12|11|10| 9| 8| 7| 6| 5| 4| 3| 2| 1| 0|
| 1  1| 0  1  1  0| 0| 0  0  0  0| 0| 0  0| 0  0| 0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0|

ret
------------------------------------------------------------------------------------------------

56, spop,                       opcode = 56
------------------------------------------------------------------------------------------------
|31|30|29|28|27|26|25|24|23|22|21|20|19|18|17|16|15|14|13|12|11|10| 9| 8| 7| 6| 5| 4| 3| 2| 1| 0|
| 1  1| 1  0  0  0| 0|<-- sr --->| 0| 1  1| 0| 0  0  0  0  0  0  0  0  0  0  0  0  0|<-- rb --->|

// S = 1
sr = *(uint64_t*)rb; // sr: system register

rb += 8
------------------------------------------------------------------------------------------------

57, spush,                      opcode = 57
------------------------------------------------------------------------------------------------
|31|30|29|28|27|26|25|24|23|22|21|20|19|18|17|16|15|14|13|12|11|10| 9| 8| 7| 6| 5| 4| 3| 2| 1| 0|
| 1  1| 1  0  0  1| 0|<-- sr --->| 0| 1  1| 0| 0  0  0  0  0  0  0  0  0  0  0  0  0|<-- rb --->|

// S = 1
*(uint64_t*)rb = sr; // sr: system register

rb -= 8
------------------------------------------------------------------------------------------------

58, in, disp                    opcode = 58
------------------------------------------------------------------------------------------------
|31|30|29|28|27|26|25|24|23|22|21|20|19|18|17|16|15|14|13|12|11|10| 9| 8| 7| 6| 5| 4| 3| 2| 1| 0|
| 1  1| 1  0  1  0| 0|<-- rd --->| 0| size| D  0|<---------------- uimm16 --------------------->|

// S = 1
in  rd, uimm16 port; // D = 0,
out rs, uimm16 port; // D = 1,
------------------------------------------------------------------------------------------------

60, smov,                       opcode = 60
------------------------------------------------------------------------------------------------
|31|30|29|28|27|26|25|24|23|22|21|20|19|18|17|16|15|14|13|12|11|10| 9| 8| 7| 6| 5| 4| 3| 2| 1| 0|
| 1  1| 1  1  0  0| 0|<-- rd --->| 0| 0  0| D  0| 0  0  0  0  0  0| 0  0| 0  0  0  0|<-- sr --->|

//  S = 1
// sr: system register

smov rd, sr // D = 0, sr --> rd 
smov sr, rd // D = 1, rd --> sr
------------------------------------------------------------------------------------------------

62, iret,                       opcode = 62
------------------------------------------------------------------------------------------------
|31|30|29|28|27|26|25|24|23|22|21|20|19|18|17|16|15|14|13|12|11|10| 9| 8| 7| 6| 5| 4| 3| 2| 1| 0|
| 1  1| 1  1  1  0| 0| 0  0  0  0| 0| 0  0| D  0| 0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0|

// S = 1
iret    // D = 0,
syscall // D = 1,
------------------------------------------------------------------------------------------------
