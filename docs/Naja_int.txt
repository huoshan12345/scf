                                Naja instructions
------------------------------------------------------------------------------------------------
                                opcode format
------------------------------------------------------------------------------------------------
|31|30|29|28|27|26|25|24|23|22|21|20|19|18|17|16|15|14|13|12|11|10| 9| 8| 7| 6| 5| 4| 3| 2| 1| 0|
| type|   opcode  | 0|<-- rd --->| 0| size| SH  |<---- uimm6 ---->| 0  0|<-- rs1 -->|<-- rs0 -->|

type: 0 = integer, 1 = float,  2 = vector, 3 = system
size: 0 = 8bits,   1 = 16bits, 2 = 32bits, 3 = 64bits
SH  : 0 = LSL,     1 = LSR,    2 = ASR,   (3 = reserved)
   0: reserved
------------------------------------------------------------------------------------------------

0, add, +, +=,                  opcode = 0
------------------------------------------------------------------------------------------------
|31|30|29|28|27|26|25|24|23|22|21|20|19|18|17|16|15|14|13|12|11|10| 9| 8| 7| 6| 5| 4| 3| 2| 1| 0|
| 0  0| 0  0  0  0| 0|<-- rd --->| 0| size| SH  |<---- uimm6 ---->| 0  0|<-- rs1 -->|<-- rs0 -->|

rd = rs0 + (rs1 << uimm6);  // SH = 0, LSL
rd = rs0 + (rs1 >> uimm6);  // SH = 1, LSR
rd = rs0 + (rs1 >> uimm6);  // SH = 2, ASR
------------------------------------------------------------------------------------------------
|31|30|29|28|27|26|25|24|23|22|21|20|19|18|17|16|15|14|13|12|11|10| 9| 8| 7| 6| 5| 4| 3| 2| 1| 0|
| 0  0| 0  0  0  0| 0|<-- rd --->| 0| size| 1  1|<------------- uimm12 ------------>|<-- rs0 -->|

rd = rs0 + (uint64_t)uimm12; // SH = 3, IMM
------------------------------------------------------------------------------------------------

1, sub, -, -=,                  opcode = 1
------------------------------------------------------------------------------------------------
|31|30|29|28|27|26|25|24|23|22|21|20|19|18|17|16|15|14|13|12|11|10| 9| 8| 7| 6| 5| 4| 3| 2| 1| 0|
| 0  0| 0  0  0  1| 0|<-- rd --->| 0| size| SH  |<---- uimm6 ---->| 0  0|<-- rs1 -->|<-- rs0 -->|

rd = rs0 - (rs1 << uimm6);  // SH = 0, LSL
rd = rs0 - (rs1 >> uimm6);  // SH = 1, LSR
rd = rs0 - (rs1 >> uimm6);  // SH = 2, ASR
------------------------------------------------------------------------------------------------
|31|30|29|28|27|26|25|24|23|22|21|20|19|18|17|16|15|14|13|12|11|10| 9| 8| 7| 6| 5| 4| 3| 2| 1| 0|
| 0  0| 0  0  0  1| 0|<-- rd --->| 0| size| 1  1|<------------- uimm12 ------------>|<-- rs0 -->|

rd = rs0 - (uint64_t)uimm12; // SH = 3, IMM
------------------------------------------------------------------------------------------------

cmp, >, >=, <, <=, ==, !=,      opcode = 1
------------------------------------------------------------------------------------------------
|31|30|29|28|27|26|25|24|23|22|21|20|19|18|17|16|15|14|13|12|11|10| 9| 8| 7| 6| 5| 4| 3| 2| 1| 0|
| 0  0| 0  0  0  1| 0| 1  1  1  1| 0| size| SH  |<---- uimm6 ---->| 0  0|<-- rs1 -->|<-- rs0 -->|

flags = rs0 - (rs1 << uimm6);  // SH = 0, LSL, rd = 15
flags = rs0 - (rs1 >> uimm6);  // SH = 1, LSR, rd = 15
flags = rs0 - (rs1 >> uimm6);  // SH = 2, ASR, rd = 15

------------------------------------------------------------------------------------------------
|31|30|29|28|27|26|25|24|23|22|21|20|19|18|17|16|15|14|13|12|11|10| 9| 8| 7| 6| 5| 4| 3| 2| 1| 0|
| 0  0| 0  0  0  1| 0| 1  1  1  1| 0| size| 1  1|<------------- uimm12 ------------>|<-- rs0 -->|

flags = rs0 - (uint64_t)uimm12; // SH = 3, IMM, rd = 15
------------------------------------------------------------------------------------------------

2, mul, *, *=,                  opcode = 2
------------------------------------------------------------------------------------------------
|31|30|29|28|27|26|25|24|23|22|21|20|19|18|17|16|15|14|13|12|11|10| 9| 8| 7| 6| 5| 4| 3| 2| 1| 0|
| 0  0| 0  0  1  0| 0|<-- rd --->| 0| size| s| A|<-- rs2 -->| 0  0| 0  0|<-- rs1 -->|<-- rs0 -->|

s = 0, unsigned mul.
s = 1,   signed mul.

rd = rs2 + rs0 * rs1; // A = 0
rd = rs2 - rs0 * rs1; // A = 1

------------------------------------------------------------------------------------------------
|31|30|29|28|27|26|25|24|23|22|21|20|19|18|17|16|15|14|13|12|11|10| 9| 8| 7| 6| 5| 4| 3| 2| 1| 0|
| 0  0| 0  0  1  0| 0|<-- rd --->| 0| size| s| 0| 1  1  1  1| 0  0| 0  0|<-- rs1 -->|<-- rs0 -->|

s = 0, unsigned mul.
s = 1,   signed mul.

rd = rs0 * rs1; // A = 0, rs2 = 0xf = 15
------------------------------------------------------------------------------------------------

3, div, *, *=,                  opcode = 3
------------------------------------------------------------------------------------------------
|31|30|29|28|27|26|25|24|23|22|21|20|19|18|17|16|15|14|13|12|11|10| 9| 8| 7| 6| 5| 4| 3| 2| 1| 0|
| 0  0| 0  0  1  1| 0|<-- rd --->| 0| size| s| 0| 0  0  0  0| 0  0| 0  0|<-- rs1 -->|<-- rs0 -->|

s = 0, unsigned div.
s = 1,   signed div.

rd = rs0 / rs1; // A = 0, rs2 = 0xf = 15
------------------------------------------------------------------------------------------------

4, ldr, [b + disp]              opcode = 4
------------------------------------------------------------------------------------------------
|31|30|29|28|27|26|25|24|23|22|21|20|19|18|17|16|15|14|13|12|11|10| 9| 8| 7| 6| 5| 4| 3| 2| 1| 0|
| 0  0| 0  1  0  0| 0|<-- rd --->| 0| size| s|<---------------- simm13 ------------>|<-- rb --->|

rd = *(uint8_t* )(rb +  (int64_t)simm13);        // size = 0, s = 0, zbq
rd = *(uint16_t*)(rb + ((int64_t)simm13 << 1));  // size = 1, s = 0, zwq
rd = *(uint32_t*)(rb + ((int64_t)simm13 << 2));  // size = 2, s = 0, zlq

rd = *(uint64_t*)(rb + ((int64_t)simm13 << 3));  // size = 3, s = 0, keep

rd = *( int8_t* )(rb +  (int64_t)simm13);        // size = 0, s = 1, sbq
rd = *( int16_t*)(rb + ((int64_t)simm13 << 1));  // size = 1, s = 1, swq
rd = *( int32_t*)(rb + ((int64_t)simm13 << 2));  // size = 2, s = 1, slq
------------------------------------------------------------------------------------------------

5, and, &, &=,                  opcode = 5
------------------------------------------------------------------------------------------------
|31|30|29|28|27|26|25|24|23|22|21|20|19|18|17|16|15|14|13|12|11|10| 9| 8| 7| 6| 5| 4| 3| 2| 1| 0|
| 0  0| 0  1  0  1| 0|<-- rd --->| 0| size| SH  |<---- uimm6 ---->| 0  0|<-- rs1 -->|<-- rs0 -->|

rd = rs0 & (rs1 << uimm6);  // SH = 0, LSL
rd = rs0 & (rs1 >> uimm6);  // SH = 1, LSR
rd = rs0 & (rs1 >> uimm6);  // SH = 2, ASR
------------------------------------------------------------------------------------------------
|31|30|29|28|27|26|25|24|23|22|21|20|19|18|17|16|15|14|13|12|11|10| 9| 8| 7| 6| 5| 4| 3| 2| 1| 0|
| 0  0| 0  1  0  1| 0|<-- rd --->| 0| size| 1  1|<------------- uimm12 ------------>|<-- rs0 -->|

rd = rs0 & (uint64_t)uimm12; // SH = 3, IMM
------------------------------------------------------------------------------------------------

teq, !,                         opcode = 8
------------------------------------------------------------------------------------------------
|31|30|29|28|27|26|25|24|23|22|21|20|19|18|17|16|15|14|13|12|11|10| 9| 8| 7| 6| 5| 4| 3| 2| 1| 0|
| 0  0| 0  1  0  1| 0| 1  1  1  1| 0| size| SH  |<---- uimm6 ---->| 0  0|<-- rs1 -->|<-- rs0 -->|

ZF = rs0 & (rs1 << uimm6);  // SH = 0, LSL
ZF = rs0 & (rs1 >> uimm6);  // SH = 1, LSR
ZF = rs0 & (rs1 >> uimm6);  // SH = 2, ASR

------------------------------------------------------------------------------------------------
|31|30|29|28|27|26|25|24|23|22|21|20|19|18|17|16|15|14|13|12|11|10| 9| 8| 7| 6| 5| 4| 3| 2| 1| 0|
| 0  0| 0  1  0  1| 0| 1  1  1  1| 0| size| 1  1|<------------- uimm12 ------------>|<-- rs0 -->|

ZF = rs0 & (uint64_t)uimm12; // SH = 3, IMM
------------------------------------------------------------------------------------------------

6, str, [b + disp]              opcode = 6
------------------------------------------------------------------------------------------------
|31|30|29|28|27|26|25|24|23|22|21|20|19|18|17|16|15|14|13|12|11|10| 9| 8| 7| 6| 5| 4| 3| 2| 1| 0|
| 0  0| 0  1  1  0| 0|<-- rs --->| 0| size| 0|<---------------- simm13 ------------>|<-- rb --->|

*(uint8_t* )(rb +  (int64_t)simm13)       = rs;  // size = 0, zbq
*(uint16_t*)(rb + ((int64_t)simm13 << 1)) = rs;  // size = 1, zwq
*(uint32_t*)(rb + ((int64_t)simm13 << 2)) = rs;  // size = 2, zlq
*(uint64_t*)(rb + ((int64_t)simm13 << 3)) = rs;  // size = 3, keep
------------------------------------------------------------------------------------------------

7, or, |, |=,                   opcode = 7
------------------------------------------------------------------------------------------------
|31|30|29|28|27|26|25|24|23|22|21|20|19|18|17|16|15|14|13|12|11|10| 9| 8| 7| 6| 5| 4| 3| 2| 1| 0|
| 0  0| 0  1  1  1| 0|<-- rd --->| 0| size| SH  |<---- uimm6 ---->| 0  0|<-- rs1 -->|<-- rs0 -->|

rd = rs0 | (rs1 << uimm6);  // SH = 0, LSL
rd = rs0 | (rs1 >> uimm6);  // SH = 1, LSR
rd = rs0 | (rs1 >> uimm6);  // SH = 2, ASR

------------------------------------------------------------------------------------------------
|31|30|29|28|27|26|25|24|23|22|21|20|19|18|17|16|15|14|13|12|11|10| 9| 8| 7| 6| 5| 4| 3| 2| 1| 0|
| 0  0| 0  1  1  1| 0|<-- rd --->| 0| size| 1  1|<------------- uimm12 ------------>|<-- rs0 -->|

rd = rs0 | (uint64_t)uimm12; // SH = 3, IMM
------------------------------------------------------------------------------------------------

8, pop, b[0]                    opcode = 8
------------------------------------------------------------------------------------------------
|31|30|29|28|27|26|25|24|23|22|21|20|19|18|17|16|15|14|13|12|11|10| 9| 8| 7| 6| 5| 4| 3| 2| 1| 0|
| 0  0| 1  0  0  0| 0|<-- rd --->| 0| 1  1| s| 0  0  0  0  0  0  0  0  0  0  0  0  0|<-- rb --->|

rd = *(uint64_t*)rb;  // size = 3, s = 0,
rd = *(uint64_t*)rb;  // size = 3, s = 1, fpop

rb += 1 << size
------------------------------------------------------------------------------------------------

9, push, b[0]                   opcode = 9
------------------------------------------------------------------------------------------------
|31|30|29|28|27|26|25|24|23|22|21|20|19|18|17|16|15|14|13|12|11|10| 9| 8| 7| 6| 5| 4| 3| 2| 1| 0|
| 0  0| 1  0  0  1| 0|<-- rs --->| 0| 1  1| s| 0  0  0  0  0  0  0  0  0  0  0  0  0|<-- rb --->|

*(uint64_t*)rb = rs;  // size = 3, s = 0,
*(uint64_t*)rb = rs;  // size = 3, s = 1, fpush

rb -= 1 << size 
------------------------------------------------------------------------------------------------

10, ldr, b[i << s]              opcode = 10
------------------------------------------------------------------------------------------------
|31|30|29|28|27|26|25|24|23|22|21|20|19|18|17|16|15|14|13|12|11|10| 9| 8| 7| 6| 5| 4| 3| 2| 1| 0|
| 0  0| 1  0  1  0| 0|<-- rd --->| 0| size| s| 0|<---- uimm6 ---->| 0  0|<-- ri --->|<-- rb --->|

rd = *(uint8_t* )(rb + (ri << uimm6));  // size = 0, s = 0, zbq
rd = *(uint16_t*)(rb + (ri << uimm6));  // size = 1, s = 0, zwq
rd = *(uint32_t*)(rb + (ri << uimm6));  // size = 2, s = 0, zlq

rd = *(uint64_t*)(rb + (ri << uimm6));  // size = 3, s = 0, keep

rd = *( int8_t* )(rb + (ri << uimm6));  // size = 0, s = 1, sbq
rd = *( int16_t*)(rb + (ri << uimm6));  // size = 1, s = 1, swq
rd = *( int32_t*)(rb + (ri << uimm6));  // size = 2, s = 1, slq
------------------------------------------------------------------------------------------------

11, str, b[i << s]              opcode = 11
------------------------------------------------------------------------------------------------
|31|30|29|28|27|26|25|24|23|22|21|20|19|18|17|16|15|14|13|12|11|10| 9| 8| 7| 6| 5| 4| 3| 2| 1| 0|
| 0  0| 1  0  1  1| 0|<-- rs --->| 0| size| s| 0|<---- uimm6 ---->| 0  0|<-- ri --->|<-- rb --->|

*(uint8_t* )(rb + (ri << uimm8)) = rs;  // size = 0, s = 0,
*(uint16_t*)(rb + (ri << uimm8)) = rs;  // size = 1, s = 0,
*(uint32_t*)(rb + (ri << uimm8)) = rs;  // size = 2, s = 0,
*(uint64_t*)(rb + (ri << uimm8)) = rs;  // size = 3, s = 0,

*(float *  )(rb + (ri << uimm8)) = rs;  // size = 2, s = 1,
*(double*  )(rb + (ri << uimm8)) = rs;  // size = 3, s = 1,
------------------------------------------------------------------------------------------------

12, mov,                        opcode = 12
------------------------------------------------------------------------------------------------
|31|30|29|28|27|26|25|24|23|22|21|20|19|18|17|16|15|14|13|12|11|10| 9| 8| 7| 6| 5| 4| 3| 2| 1| 0|
| 0  0| 1  1  0  0| 0|<-- rd --->| 0| size| SH  | 0  0  0  0  0  0| 0  0|<-- rs1 -->|<-- rs --->|

rd =  rs << rs1; // SH = 0 LSL,
rd =  rs >> rs1; // SH = 1 LSR,
rd =  rs >> rs1; // SH = 2 ASR,

------------------------------------------------------------------------------------------------
|31|30|29|28|27|26|25|24|23|22|21|20|19|18|17|16|15|14|13|12|11|10| 9| 8| 7| 6| 5| 4| 3| 2| 1| 0|
| 0  0| 1  1  0  0| 0|<-- rd --->| 0| size| SH  |<---- uimm6 ---->| 0  0| 1  1  1  1|<-- rs --->|

rd = rs;          // SH = 0 LSL, uimm6 = 0
rd = rs << uimm6; // SH = 0 LSL,
rd = rs >> uimm6; // SH = 1 LSR,
rd = rs >> uimm6; // SH = 2 ASR,
------------------------------------------------------------------------------------------------

13, movx,                       opcode = 13
------------------------------------------------------------------------------------------------
|31|30|29|28|27|26|25|24|23|22|21|20|19|18|17|16|15|14|13|12|11|10| 9| 8| 7| 6| 5| 4| 3| 2| 1| 0|
| 0  0| 1  1  0  1| 0|<-- rd --->| 0| size| s| 0| 0  0  0  0  0  0| 0  0| 0  0  0  0|<-- rs --->|

rd =  uint8_t(rs);  // size = 0, s = 0, zbq,
rd = uint16_t(rs);  // size = 1, s = 0, zwq,
rd = uint32_t(rs);  // size = 2, s = 0, zlq

rd =   int8_t(rs);  // size = 0, s = 1, sbq,
rd =  int16_t(rs);  // size = 1, s = 1, swq
rd =  int32_t(rs);  // size = 2, s = 1, slq

14, not,                        opcode = 14
------------------------------------------------------------------------------------------------
|31|30|29|28|27|26|25|24|23|22|21|20|19|18|17|16|15|14|13|12|11|10| 9| 8| 7| 6| 5| 4| 3| 2| 1| 0|
| 0  0| 1  1  1  0| 0|<-- rd --->| 0| size| 0  0| 0  0  0  0  0  0| 0  0| 0  0  0  0|<-- rs --->|

rd = -rs; // NEG,

------------------------------------------------------------------------------------------------
|31|30|29|28|27|26|25|24|23|22|21|20|19|18|17|16|15|14|13|12|11|10| 9| 8| 7| 6| 5| 4| 3| 2| 1| 0|
| 0  0| 1  1  1  0| 0|<-- rd --->| 0| size| 0  1| 0  0  0  0  0  0| 0  0| 0  0  0  0|<-- rs --->|

rd = ~rs; // NOT,

------------------------------------------------------------------------------------------------
|31|30|29|28|27|26|25|24|23|22|21|20|19|18|17|16|15|14|13|12|11|10| 9| 8| 7| 6| 5| 4| 3| 2| 1| 0|
| 0  0| 1  1  1  0| 0|<-- rd --->| 0| size| 1  0|<------------------ uimm16 ------------------->|

rd = uimm16;       // size = 0, IMM
rd = uimm16 << 16; // size = 1, IMM
rd = uimm16 << 32; // size = 2, IMM
rd = uimm16 << 48; // size = 3, IMM

------------------------------------------------------------------------------------------------
|31|30|29|28|27|26|25|24|23|22|21|20|19|18|17|16|15|14|13|12|11|10| 9| 8| 7| 6| 5| 4| 3| 2| 1| 0|
| 0  0| 1  1  1  0| 0|<-- rd --->| 0| size| 1  1|<------------------ uimm16 ------------------->|

rd = ~uimm16; // MVN
------------------------------------------------------------------------------------------------
